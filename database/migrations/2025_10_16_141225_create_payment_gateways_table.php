<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('payment_gateways', function (Blueprint $table) {
            $table->id();
            $table->string('country_code');
            $table->string('code')->unique();
            $table->string('name');
            $table->json('settings')->nullable();
            $table->text('svg_icon');

            $table->tinyInteger('status')->default(1);
            $table->integer('position')->default(0);
            $table->timestamp('created_at')->default(DB::raw('CURRENT_TIMESTAMP'));
            $table->timestamp('updated_at')->default(DB::raw('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'));
        });

        $razorpaySvgIcon = '<?xml version="1.0" encoding="UTF-8"?><svg version="1.1" viewBox="0 0 1896 401" xmlns="http://www.w3.org/2000/svg"><title>Group</title><desc>Created with Sketch.</desc><g fill="none" fill-rule="evenodd"><path d="m451.92 151.49c-2.99 11.156-8.785 19.344-17.386 24.572-8.611 5.227-20.688 7.846-36.266 7.846h-49.492l17.374-64.831h49.492c15.566 0 26.253 2.614 32.059 7.841 5.795 5.233 7.209 13.422 4.219 24.572m51.253-1.397c6.294-23.459 3.685-41.47-7.823-54.017-11.51-12.547-31.677-18.817-60.48-18.817h-110.48l-66.494 248.14h53.675l26.809-100.02h35.2c7.893 0 14.106 1.28 18.65 3.836 4.554 2.561 7.22 7.093 8.043 13.59l9.574 82.599h57.511l-9.33-77.018c-1.901-17.195-9.77-27.302-23.598-30.321 17.629-5.106 32.395-13.596 44.287-25.447 11.881-11.845 20.04-26.015 24.456-42.52" fill="#072654"/><path d="m633.62 236.53c-4.485 16.725-11.394 29.509-20.724 38.335-9.341 8.832-20.515 13.243-33.519 13.243-13.26 0-22.254-4.353-26.995-13.069-4.764-8.71-4.926-21.309-0.498-37.814 4.416-16.493 11.463-29.387 21.164-38.689 9.689-9.284 21.037-13.937 34.052-13.937 13.005 0 21.814 4.48 26.38 13.422 4.568 8.942 4.625 21.778 0.14 38.509zm23.528-87.827-6.722 25.094c-2.91-9.064-8.531-16.262-16.853-21.605-8.333-5.343-18.66-8.021-30.97-8.021-15.102 0-29.625 3.895-43.556 11.678-13.932 7.788-26.114 18.765-36.533 32.934-10.42 14.175-18.058 30.321-22.915 48.442-4.856 18.128-5.83 34.1-2.909 47.921 2.921 13.828 9.249 24.456 18.996 31.891 9.737 7.441 22.278 11.15 37.612 11.15 12.309 0 24.039-2.555 35.166-7.667 11.126-5.105 20.572-12.198 28.349-21.257l-7.011 26.137h51.924l47.348-176.7h-51.926z" fill="#072654"/><polygon points="895.79 148.71 744.88 148.71 734.33 188.09 822.16 188.09 706.04 288.46 696.13 325.4 851.92 325.4 862.48 286.02 768.39 286.02 886.26 184.25" fill="#072654"/><path d="m1028.7 236.19c-4.671 17.42-11.591 30.442-20.747 39.037-9.156 8.594-20.237 12.888-33.241 12.888-27.192 0-36.14-17.299-26.867-51.925 4.613-17.195 11.567-30.147 20.863-38.857 9.306-8.716 20.573-13.074 33.821-13.074 13.004 0 21.778 4.358 26.299 13.074 4.519 8.71 4.485 21.662-0.128 38.857m30.379-80.861c-11.95-7.43-27.215-11.15-45.806-11.15-18.823 0-36.255 3.72-52.307 11.15-16.053 7.441-29.719 18.128-40.996 32.065-11.29 13.943-19.426 30.205-24.41 48.796s-5.563 34.847-1.738 48.79c3.813 13.943 11.741 24.63 23.818 32.065 12.066 7.441 27.504 11.15 46.328 11.15 18.59 0 35.848-3.709 51.786-11.15 15.913-7.435 29.532-18.122 40.821-32.065 11.277-13.943 19.414-30.199 24.398-48.79s5.564-34.853 1.75-48.796c-3.825-13.937-11.707-24.624-23.644-32.065" fill="#072654"/><path d="m1602.1 236.53c-4.485 16.725-11.394 29.509-20.724 38.335-9.331 8.832-20.527 13.243-33.531 13.243-13.236 0-22.242-4.353-26.983-13.069-4.764-8.71-4.926-21.309-0.498-37.814 4.416-16.493 11.463-29.387 21.164-38.689 9.689-9.284 21.037-13.937 34.052-13.937 13.005 0 21.814 4.48 26.38 13.422 4.568 8.942 4.625 21.778 0.14 38.509zm23.528-87.827-6.722 25.094c-2.91-9.064-8.531-16.262-16.853-21.605-8.333-5.343-18.66-8.021-30.97-8.021-15.102 0-29.625 3.895-43.556 11.678-13.932 7.788-26.114 18.765-36.533 32.934-10.42 14.175-18.059 30.321-22.915 48.442-4.856 18.128-5.819 34.1-2.909 47.921 2.92 13.828 9.238 24.456 18.996 31.891 9.737 7.441 22.278 11.15 37.612 11.15 12.308 0 24.039-2.555 35.165-7.667 11.127-5.105 20.573-12.198 28.35-21.257l-7.011 26.137h51.924l47.348-176.7h-51.926z" fill="#072654"/><path d="m1244.2 196.11 13.236-48.095c-4.497-2.324-10.455-3.488-17.884-3.488-11.857 0-23.274 2.961-34.273 8.889-9.446 5.086-17.49 12.225-24.282 21.17l6.885-25.9-15.034 0.025h-36.875l-47.711 176.7h52.643l24.746-92.352c3.605-13.474 10.072-23.987 19.426-31.538 9.33-7.551 20.978-11.33 34.922-11.33 8.599 0 16.655 1.976 24.201 5.923" fill="#072654"/><path d="m1390.7 237.23c-4.428 16.505-11.289 29.104-20.585 37.814-9.318 8.716-20.469 13.068-33.473 13.068-13.016 0-21.882-4.41-26.6-13.242-4.729-8.826-4.845-21.605-0.36-38.336 4.486-16.73 11.463-29.567 20.945-38.509 9.48-8.942 20.735-13.422 33.751-13.422 12.772 0 21.454 4.654 26.055 13.944 4.59 9.295 4.683 22.195 0.267 38.683m36.788-81.377c-9.77-7.783-22.207-11.671-37.298-11.671-13.248 0-25.858 3.019-37.797 9.058-11.972 6.05-21.673 14.285-29.115 24.745l0.168-1.159 8.844-28.143h-10.177v0.025h-41.21l-13.085 48.862c-0.151 0.568-0.278 1.098-0.43 1.672l-53.976 201.44h52.633l27.179-101.41c2.665 9.052 8.206 16.145 16.598 21.251 8.391 5.111 18.741 7.667 31.062 7.667 15.335 0 29.915-3.709 43.765-11.15 13.84-7.43 25.87-18.064 36.071-31.891 10.21-13.816 17.745-29.794 22.601-47.921 4.857-18.122 5.864-34.267 3.048-48.442-2.816-14.17-9.122-25.146-18.881-32.935" fill="#072654"/><path d="m1895.5 148.76 0.034-0.049h-31.88c-1.019 0-1.918 0.029-2.85 0.049h-16.546l-8.461 11.788c-0.678 0.888-1.356 1.782-2.086 2.819l-0.922 1.365-67.242 93.648-13.943-109.67h-55.078l27.892 166.65-61.597 85.329h1.756 31.45 21.669l14.928-21.146c0.44-0.63 0.817-1.146 1.287-1.812l17.42-24.697 0.499-0.707 77.945-110.49 65.672-92.999 0.087-0.073h-0.034z" fill="#072654"/><polygon points="122.63 105.69 106.88 163.67 197.03 105.36 138.07 325.35 197.95 325.4 285.05 0.4822" fill="#3395FF"/><path d="m25.595 232.92-24.787 92.478h122.73s50.198-188.08 50.212-188.14c-0.047 0.03-148.15 95.659-148.15 95.659" fill="#072654"/></g></svg>';

        $stripeSvgIcon = '<?xml version="1.0" encoding="UTF-8"?><svg class="w-full h-full block" enable-background="new 0 0 468 222.5" aria-hidden="true" focusable="false" version="1.1" viewBox="54 36 360.02 149.84" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;fill:#635BFF;} </style><path class="st0" d="m414 113.4c0-25.6-12.4-45.8-36.1-45.8-23.8 0-38.2 20.2-38.2 45.6 0 30.1 17 45.3 41.4 45.3 11.9 0 20.9-2.7 27.7-6.5v-20c-6.8 3.4-14.6 5.5-24.5 5.5-9.7 0-18.3-3.4-19.4-15.2h48.9c0-1.3 0.2-6.5 0.2-8.9zm-49.4-9.5c0-11.3 6.9-16 13.2-16 6.1 0 12.6 4.7 12.6 16h-25.8z"/><path class="st0" d="m301.1 67.6c-9.8 0-16.1 4.6-19.6 7.8l-1.3-6.2h-22v116.6l25-5.3 0.1-28.3c3.6 2.6 8.9 6.3 17.7 6.3 17.9 0 34.2-14.4 34.2-46.1-0.1-29-16.6-44.8-34.1-44.8zm-6 68.9c-5.9 0-9.4-2.1-11.8-4.7l-0.1-37.1c2.6-2.9 6.2-4.9 11.9-4.9 9.1 0 15.4 10.2 15.4 23.3 0 13.4-6.2 23.4-15.4 23.4z"/><polygon class="st0" points="223.8 61.7 248.9 56.3 248.9 36 223.8 41.3"/><rect class="st0" x="223.8" y="69.3" width="25.1" height="87.5"/><path class="st0" d="m196.9 76.7-1.6-7.4h-21.6v87.5h25v-59.3c5.9-7.7 15.9-6.3 19-5.2v-23c-3.2-1.2-14.9-3.4-20.8 7.4z"/><path class="st0" d="m146.9 47.6-24.4 5.2-0.1 80.1c0 14.8 11.1 25.7 25.9 25.7 8.2 0 14.2-1.5 17.5-3.3v-20.3c-3.2 1.3-19 5.9-19-8.9v-35.5h19v-21.3h-19l0.1-21.7z"/><path class="st0" d="m79.3 94.7c0-3.9 3.2-5.4 8.5-5.4 7.6 0 17.2 2.3 24.8 6.4v-23.5c-8.3-3.3-16.5-4.6-24.8-4.6-20.3 0-33.8 10.6-33.8 28.3 0 27.6 38 23.2 38 35.1 0 4.6-4 6.1-9.6 6.1-8.3 0-18.9-3.4-27.3-8v23.8c9.3 4 18.7 5.7 27.3 5.7 20.8 0 35.1-10.3 35.1-28.2-0.1-29.8-38.2-24.5-38.2-35.7z"/></svg>';

        $paypalSvgIcon = '<?xml version="1.0" encoding="UTF-8"?><svg enable-background="new 0 0 124 33" version="1.1" viewBox="0 0 124 33" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="m46.211 6.749h-6.839c-0.468 0-0.866 0.34-0.939 0.802l-2.766 17.537c-0.055 0.346 0.213 0.658 0.564 0.658h3.265c0.468 0 0.866-0.34 0.939-0.803l0.746-4.73c0.072-0.463 0.471-0.803 0.938-0.803h2.165c4.505 0 7.105-2.18 7.784-6.5 0.306-1.89 0.013-3.375-0.872-4.415-0.972-1.142-2.696-1.746-4.985-1.746zm0.789 6.405c-0.374 2.454-2.249 2.454-4.062 2.454h-1.032l0.724-4.583c0.043-0.277 0.283-0.481 0.563-0.481h0.473c1.235 0 2.4 0 3.002 0.704 0.359 0.42 0.469 1.044 0.332 1.906z" fill="#253B80"/><path d="m66.654 13.075h-3.275c-0.279 0-0.52 0.204-0.563 0.481l-0.145 0.916-0.229-0.332c-0.709-1.029-2.29-1.373-3.868-1.373-3.619 0-6.71 2.741-7.312 6.586-0.313 1.918 0.132 3.752 1.22 5.031 0.998 1.176 2.426 1.666 4.125 1.666 2.916 0 4.533-1.875 4.533-1.875l-0.146 0.91c-0.055 0.348 0.213 0.66 0.562 0.66h2.95c0.469 0 0.865-0.34 0.939-0.803l1.77-11.209c0.056-0.345-0.211-0.658-0.561-0.658zm-4.565 6.374c-0.316 1.871-1.801 3.127-3.695 3.127-0.951 0-1.711-0.305-2.199-0.883-0.484-0.574-0.668-1.391-0.514-2.301 0.295-1.855 1.805-3.152 3.67-3.152 0.93 0 1.686 0.309 2.184 0.892 0.499 0.589 0.697 1.411 0.554 2.317z" fill="#253B80"/><path d="m84.096 13.075h-3.291c-0.314 0-0.609 0.156-0.787 0.417l-4.539 6.686-1.924-6.425c-0.121-0.402-0.492-0.678-0.912-0.678h-3.234c-0.393 0-0.666 0.384-0.541 0.754l3.625 10.638-3.408 4.811c-0.268 0.379 2e-3 0.9 0.465 0.9h3.287c0.312 0 0.604-0.152 0.781-0.408l10.946-15.8c0.262-0.378-7e-3 -0.895-0.468-0.895z" fill="#253B80"/><path d="m94.992 6.749h-6.84c-0.467 0-0.865 0.34-0.938 0.802l-2.766 17.537c-0.055 0.346 0.213 0.658 0.562 0.658h3.51c0.326 0 0.605-0.238 0.656-0.562l0.785-4.971c0.072-0.463 0.471-0.803 0.938-0.803h2.164c4.506 0 7.105-2.18 7.785-6.5 0.307-1.89 0.012-3.375-0.873-4.415-0.971-1.142-2.694-1.746-4.983-1.746zm0.789 6.405c-0.373 2.454-2.248 2.454-4.062 2.454h-1.031l0.725-4.583c0.043-0.277 0.281-0.481 0.562-0.481h0.473c1.234 0 2.4 0 3.002 0.704 0.359 0.42 0.468 1.044 0.331 1.906z" fill="#179BD7"/><path d="m115.43 13.075h-3.273c-0.281 0-0.52 0.204-0.562 0.481l-0.145 0.916-0.23-0.332c-0.709-1.029-2.289-1.373-3.867-1.373-3.619 0-6.709 2.741-7.311 6.586-0.312 1.918 0.131 3.752 1.219 5.031 1 1.176 2.426 1.666 4.125 1.666 2.916 0 4.533-1.875 4.533-1.875l-0.146 0.91c-0.055 0.348 0.213 0.66 0.564 0.66h2.949c0.467 0 0.865-0.34 0.938-0.803l1.771-11.209c0.054-0.345-0.214-0.658-0.565-0.658zm-4.565 6.374c-0.314 1.871-1.801 3.127-3.695 3.127-0.949 0-1.711-0.305-2.199-0.883-0.484-0.574-0.666-1.391-0.514-2.301 0.297-1.855 1.805-3.152 3.67-3.152 0.93 0 1.686 0.309 2.184 0.892 0.501 0.589 0.699 1.411 0.554 2.317z" fill="#179BD7"/><path d="m119.3 7.23-2.807 17.858c-0.055 0.346 0.213 0.658 0.562 0.658h2.822c0.469 0 0.867-0.34 0.939-0.803l2.768-17.536c0.055-0.346-0.213-0.659-0.562-0.659h-3.16c-0.279 1e-3 -0.519 0.205-0.562 0.482z" fill="#179BD7"/><path d="m7.266 29.154 0.523-3.322-1.165-0.027h-5.563l3.866-24.513c0.012-0.074 0.051-0.143 0.108-0.192s0.13-0.076 0.206-0.076h9.38c3.114 0 5.263 0.648 6.385 1.927 0.526 0.6 0.861 1.227 1.023 1.917 0.17 0.724 0.173 1.589 7e-3 2.644l-0.012 0.077v0.676l0.526 0.298c0.443 0.235 0.795 0.504 1.065 0.812 0.45 0.513 0.741 1.165 0.864 1.938 0.127 0.795 0.085 1.741-0.123 2.812-0.24 1.232-0.628 2.305-1.152 3.183-0.482 0.809-1.096 1.48-1.825 2-0.696 0.494-1.523 0.869-2.458 1.109-0.906 0.236-1.939 0.355-3.072 0.355h-0.73c-0.522 0-1.029 0.188-1.427 0.525-0.399 0.344-0.663 0.814-0.744 1.328l-0.055 0.299-0.924 5.855-0.042 0.215c-0.011 0.068-0.03 0.102-0.058 0.125-0.025 0.021-0.061 0.035-0.096 0.035h-4.507z" fill="#253B80"/><path d="m23.048 7.667c-0.028 0.179-0.06 0.362-0.096 0.55-1.237 6.351-5.469 8.545-10.874 8.545h-2.752c-0.661 0-1.218 0.48-1.321 1.132l-1.409 8.936-0.399 2.533c-0.067 0.428 0.263 0.814 0.695 0.814h4.881c0.578 0 1.069-0.42 1.16-0.99l0.048-0.248 0.919-5.832 0.059-0.32c0.09-0.572 0.582-0.992 1.16-0.992h0.73c4.729 0 8.431-1.92 9.513-7.476 0.452-2.321 0.218-4.259-0.978-5.622-0.362-0.411-0.811-0.752-1.336-1.03z" fill="#179BD7"/><path d="m21.754 7.151c-0.189-0.055-0.384-0.105-0.584-0.15-0.201-0.044-0.407-0.083-0.619-0.117-0.742-0.12-1.555-0.177-2.426-0.177h-7.352c-0.181 0-0.353 0.041-0.507 0.115-0.339 0.163-0.591 0.484-0.652 0.877l-1.564 9.906-0.045 0.289c0.103-0.652 0.66-1.132 1.321-1.132h2.752c5.405 0 9.637-2.195 10.874-8.545 0.037-0.188 0.068-0.371 0.096-0.55-0.313-0.166-0.652-0.308-1.017-0.429-0.09-0.03-0.183-0.059-0.277-0.087z" fill="#222D65"/><path d="M9.614,7.699c0.061-0.393,0.313-0.714,0.652-0.876c0.155-0.074,0.326-0.115,0.507-0.115h7.352c0.871,0,1.684,0.057,2.426,0.177c0.212,0.034,0.418,0.073,0.619,0.117c0.2,0.045,0.395,0.095,0.584,0.15c0.094,0.028,0.187,0.057,0.278,0.086c0.365,0.121,0.704,0.264,1.017,0.429c0.368-2.347-0.003-3.945-1.272-5.392C20.378,0.682,17.853,0,14.622,0h-9.38c-0.66,0-1.223,0.48-1.325,1.133L0.01,25.898c-0.077,0.49,0.301,0.932,0.795,0.932h5.791l1.454-9.225L9.614,7.699z" fill="#253B80"/></svg>';

        $razorpay_settings = json_encode([
            'key' => env('RAZORPAY_KEY') ?? null,
            'secret' => env('RAZORPAY_SECRET') ?? null,
            'webhook_secret' => env('RAZORPAY_WEBHOOK_SECRET') ?? null,
            'currency' => env('RAZORPAY_CURRENCY', 'INR') ?? null
        ]);

        $data = [
            [
                'country_code' => 'IN',
                'code' => 'razorpay',
                'name' => 'Razorpay',
                'settings' => $razorpay_settings,
                'svg_icon' => $razorpaySvgIcon,
                'status' => 1,
                'position' => 1,
            ],
            [
                'country_code' => 'US',
                'code' => 'stripe',
                'name' => 'Stripe',
                'settings' => json_encode(['key' => 'stripe_test_key']),
                'svg_icon' => $stripeSvgIcon,
                'status' => 1,
                'position' => 2,
            ],
            [
                'country_code' => 'IN',
                'code' => 'paypal',
                'name' => 'Paypal',
                'settings' => json_encode(['key' => 'paypal_test_key']),
                'svg_icon' => $paypalSvgIcon,
                'status' => 1,
                'position' => 3,
            ],
        ];

        DB::table('payment_gateways')->insert($data);
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('payment_gateways');
    }
};
